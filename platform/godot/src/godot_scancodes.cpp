#include <cstring>
#include <string>
#include <unordered_map>
#include <algorithm>

#include "godot_scancodes.h"

std::unordered_map<std::string, int> name_to_scancode = {
    {"ESCAPE", SDL_SCANCODE_ESCAPE},
    {"TAB", SDL_SCANCODE_TAB},
    {"BACKTAB", SDL_SCANCODE_BACKTAB},
    {"BACKSPACE", SDL_SCANCODE_BACKSPACE},
    {"RETURN", SDL_SCANCODE_RETURN},
    {"KP_ENTER", SDL_SCANCODE_KP_ENTER},
    {"INSERT", SDL_SCANCODE_INSERT},
    {"DELETE", SDL_SCANCODE_DELETE},
    {"PAUSE", SDL_SCANCODE_PAUSE},
    {"PRINT", SDL_SCANCODE_PRINT},
    {"SYSREQ", SDL_SCANCODE_SYSREQ},
    {"CLEAR", SDL_SCANCODE_CLEAR},
    {"HOME", SDL_SCANCODE_HOME},
    {"END", SDL_SCANCODE_END},
    {"LEFT", SDL_SCANCODE_LEFT},
    {"UP", SDL_SCANCODE_UP},
    {"RIGHT", SDL_SCANCODE_RIGHT},
    {"DOWN", SDL_SCANCODE_DOWN},
    {"PAGEUP", SDL_SCANCODE_PAGEUP},
    {"PAGEDOWN", SDL_SCANCODE_PAGEDOWN},
    {"LSHIFT", SDL_SCANCODE_LSHIFT},
    {"RSHIFT", SDL_SCANCODE_RSHIFT},
    {"LCTRL", SDL_SCANCODE_LCTRL},
    {"RCTRL", SDL_SCANCODE_RCTRL},
    {"LGUI", SDL_SCANCODE_LGUI},
    {"LALT", SDL_SCANCODE_LALT},
    {"RALT", SDL_SCANCODE_RALT},
    {"CAPSLOCK", SDL_SCANCODE_CAPSLOCK},
    {"NUMLOCK", SDL_SCANCODE_NUMLOCK},
    {"SCROLLLOCK", SDL_SCANCODE_SCROLLLOCK},
    {"F1", SDL_SCANCODE_F1},
    {"F2", SDL_SCANCODE_F2},
    {"F3", SDL_SCANCODE_F3},
    {"F4", SDL_SCANCODE_F4},
    {"F5", SDL_SCANCODE_F5},
    {"F6", SDL_SCANCODE_F6},
    {"F7", SDL_SCANCODE_F7},
    {"F8", SDL_SCANCODE_F8},
    {"F9", SDL_SCANCODE_F9},
    {"F10", SDL_SCANCODE_F10},
    {"F11", SDL_SCANCODE_F11},
    {"F12", SDL_SCANCODE_F12},
    {"F13", SDL_SCANCODE_F13},
    {"F14", SDL_SCANCODE_F14},
    {"F15", SDL_SCANCODE_F15},
    {"F16", SDL_SCANCODE_F16},
    {"KP_MULTIPLY", SDL_SCANCODE_KP_MULTIPLY},
    {"KP_DIVIDE", SDL_SCANCODE_KP_DIVIDE},
    {"KP_SUBTRACT", SDL_SCANCODE_KP_SUBTRACT},
    {"KP_PERIOD", SDL_SCANCODE_KP_PERIOD},
    {"KP_ADD", SDL_SCANCODE_KP_ADD},
    {"KP_0", SDL_SCANCODE_KP_0},
    {"KP_1", SDL_SCANCODE_KP_1},
    {"KP_2", SDL_SCANCODE_KP_2},
    {"KP_3", SDL_SCANCODE_KP_3},
    {"KP_4", SDL_SCANCODE_KP_4},
    {"KP_5", SDL_SCANCODE_KP_5},
    {"KP_6", SDL_SCANCODE_KP_6},
    {"KP_7", SDL_SCANCODE_KP_7},
    {"KP_8", SDL_SCANCODE_KP_8},
    {"KP_9", SDL_SCANCODE_KP_9},
    {"SUPER_L", SDL_SCANCODE_SUPER_L},
    {"SUPER_R", SDL_SCANCODE_SUPER_R},
    {"MENU", SDL_SCANCODE_MENU},
    {"HYPER_L", SDL_SCANCODE_HYPER_L},
    {"HYPER_R", SDL_SCANCODE_HYPER_R},
    {"HELP", SDL_SCANCODE_HELP},
    {"DIRECTION_L", SDL_SCANCODE_DIRECTION_L},
    {"DIRECTION_R", SDL_SCANCODE_DIRECTION_R},
    {"BACK", SDL_SCANCODE_BACK},
    {"FORWARD", SDL_SCANCODE_FORWARD},
    {"STOP", SDL_SCANCODE_STOP},
    {"REFRESH", SDL_SCANCODE_REFRESH},
    {"VOLUMEDOWN", SDL_SCANCODE_VOLUMEDOWN},
    {"VOLUMEMUTE", SDL_SCANCODE_VOLUMEMUTE},
    {"VOLUMEUP", SDL_SCANCODE_VOLUMEUP},
    {"BASSBOOST", SDL_SCANCODE_BASSBOOST},
    {"BASSUP", SDL_SCANCODE_BASSUP},
    {"BASSDOWN", SDL_SCANCODE_BASSDOWN},
    {"TREBLEUP", SDL_SCANCODE_TREBLEUP},
    {"TREBLEDOWN", SDL_SCANCODE_TREBLEDOWN},
    {"MEDIAPLAY", SDL_SCANCODE_MEDIAPLAY},
    {"MEDIASTOP", SDL_SCANCODE_MEDIASTOP},
    {"MEDIAPREVIOUS", SDL_SCANCODE_MEDIAPREVIOUS},
    {"MEDIANEXT", SDL_SCANCODE_MEDIANEXT},
    {"MEDIARECORD", SDL_SCANCODE_MEDIARECORD},
    {"HOMEPAGE", SDL_SCANCODE_HOMEPAGE},
    {"FAVORITES", SDL_SCANCODE_FAVORITES},
    {"SEARCH", SDL_SCANCODE_SEARCH},
    {"STANDBY", SDL_SCANCODE_STANDBY},
    {"OPENURL", SDL_SCANCODE_OPENURL},
    {"LAUNCHMAIL", SDL_SCANCODE_LAUNCHMAIL},
    {"LAUNCHMEDIA", SDL_SCANCODE_LAUNCHMEDIA},
    {"LAUNCH0", SDL_SCANCODE_LAUNCH0},
    {"LAUNCH1", SDL_SCANCODE_LAUNCH1},
    {"LAUNCH2", SDL_SCANCODE_LAUNCH2},
    {"LAUNCH3", SDL_SCANCODE_LAUNCH3},
    {"LAUNCH4", SDL_SCANCODE_LAUNCH4},
    {"LAUNCH5", SDL_SCANCODE_LAUNCH5},
    {"LAUNCH6", SDL_SCANCODE_LAUNCH6},
    {"LAUNCH7", SDL_SCANCODE_LAUNCH7},
    {"LAUNCH8", SDL_SCANCODE_LAUNCH8},
    {"LAUNCH9", SDL_SCANCODE_LAUNCH9},
    {"LAUNCHA", SDL_SCANCODE_LAUNCHA},
    {"LAUNCHB", SDL_SCANCODE_LAUNCHB},
    {"LAUNCHC", SDL_SCANCODE_LAUNCHC},
    {"LAUNCHD", SDL_SCANCODE_LAUNCHD},
    {"LAUNCHE", SDL_SCANCODE_LAUNCHE},
    {"LAUNCHF", SDL_SCANCODE_LAUNCHF},
    {"UNKNOWN", SDL_SCANCODE_UNKNOWN},
    {" ", SDL_SCANCODE_SPACE},
    {"!", SDL_SCANCODE_EXCLAM},
    {"\"", SDL_SCANCODE_QUOTEDBL},
    {"#", SDL_SCANCODE_NUMBERSIGN},
    {"$", SDL_SCANCODE_DOLLAR},
    {"%", SDL_SCANCODE_PERCENT},
    {"&", SDL_SCANCODE_AMPERSAND},
    {"'", SDL_SCANCODE_APOSTROPHE},
    {"(", SDL_SCANCODE_PARENLEFT},
    {")", SDL_SCANCODE_PARENRIGHT},
    {"&", SDL_SCANCODE_ASTERISK},
    {"*", SDL_SCANCODE_ASTERISK},
    {"+", SDL_SCANCODE_PLUS},
    {",", SDL_SCANCODE_COMMA},
    {"-", SDL_SCANCODE_MINUS},
    {".", SDL_SCANCODE_PERIOD},
    {"/", SDL_SCANCODE_SLASH},
    {"0", SDL_SCANCODE_0},
    {"1", SDL_SCANCODE_1},
    {"2", SDL_SCANCODE_2},
    {"3", SDL_SCANCODE_3},
    {"4", SDL_SCANCODE_4},
    {"5", SDL_SCANCODE_5},
    {"6", SDL_SCANCODE_6},
    {"7", SDL_SCANCODE_7},
    {"8", SDL_SCANCODE_8},
    {"9", SDL_SCANCODE_9},
    {":", SDL_SCANCODE_COLON},
    {";", SDL_SCANCODE_SEMICOLON},
    {"<", SDL_SCANCODE_LESS},
    {"=", SDL_SCANCODE_EQUALS},
    {">", SDL_SCANCODE_GREATER},
    {"?", SDL_SCANCODE_QUESTION},
    {"@", SDL_SCANCODE_AT},
    {"A", SDL_SCANCODE_A},
    {"B", SDL_SCANCODE_B},
    {"C", SDL_SCANCODE_C},
    {"D", SDL_SCANCODE_D},
    {"E", SDL_SCANCODE_E},
    {"F", SDL_SCANCODE_F},
    {"G", SDL_SCANCODE_G},
    {"H", SDL_SCANCODE_H},
    {"I", SDL_SCANCODE_I},
    {"J", SDL_SCANCODE_J},
    {"K", SDL_SCANCODE_K},
    {"L", SDL_SCANCODE_L},
    {"M", SDL_SCANCODE_M},
    {"N", SDL_SCANCODE_N},
    {"O", SDL_SCANCODE_O},
    {"P", SDL_SCANCODE_P},
    {"Q", SDL_SCANCODE_Q},
    {"R", SDL_SCANCODE_R},
    {"S", SDL_SCANCODE_S},
    {"T", SDL_SCANCODE_T},
    {"U", SDL_SCANCODE_U},
    {"V", SDL_SCANCODE_V},
    {"W", SDL_SCANCODE_W},
    {"X", SDL_SCANCODE_X},
    {"Y", SDL_SCANCODE_Y},
    {"Z", SDL_SCANCODE_Z},
    {"[", SDL_SCANCODE_LEFTBRACKET},
    {"\\", SDL_SCANCODE_BACKSLASH},
    {"]", SDL_SCANCODE_RIGHTBRACKET},
    {"^", SDL_SCANCODE_ASCIICIRCUM},
    {"_", SDL_SCANCODE_UNDERSCORE},
    {"`", SDL_SCANCODE_GRAVE},
    {"BRACELEFT", SDL_SCANCODE_BRACELEFT},
    {"BAR", SDL_SCANCODE_BAR},
    {"BRACERIGHT", SDL_SCANCODE_BRACERIGHT},
    {"ASCIITILDE", SDL_SCANCODE_ASCIITILDE},
    {"NOBREAKSPACE", SDL_SCANCODE_NOBREAKSPACE},
    {"EXCLAMDOWN", SDL_SCANCODE_EXCLAMDOWN},
    {"CENT", SDL_SCANCODE_CENT},
    {"STERLING", SDL_SCANCODE_STERLING},
    {"CURRENCY", SDL_SCANCODE_CURRENCY},
    {"YEN", SDL_SCANCODE_YEN},
    {"BROKENBAR", SDL_SCANCODE_BROKENBAR},
    {"SECTION", SDL_SCANCODE_SECTION},
    {"DIAERESIS", SDL_SCANCODE_DIAERESIS},
    {"COPYRIGHT", SDL_SCANCODE_COPYRIGHT},
    {"ORDFEMININE", SDL_SCANCODE_ORDFEMININE},
    {"GUILLEMOTLEFT", SDL_SCANCODE_GUILLEMOTLEFT},
    {"NOTSIGN", SDL_SCANCODE_NOTSIGN},
    {"HYPHEN", SDL_SCANCODE_HYPHEN},
    {"REGISTERED", SDL_SCANCODE_REGISTERED},
    {"MACRON", SDL_SCANCODE_MACRON},
    {"DEGREE", SDL_SCANCODE_DEGREE},
    {"PLUSMINUS", SDL_SCANCODE_PLUSMINUS},
    {"TWOSUPERIOR", SDL_SCANCODE_TWOSUPERIOR},
    {"THREESUPERIOR", SDL_SCANCODE_THREESUPERIOR},
    {"ACUTE", SDL_SCANCODE_ACUTE},
    {"MU", SDL_SCANCODE_MU},
    {"PARAGRAPH", SDL_SCANCODE_PARAGRAPH},
    {"PERIODCENTERED", SDL_SCANCODE_PERIODCENTERED},
    {"CEDILLA", SDL_SCANCODE_CEDILLA},
    {"ONESUPERIOR", SDL_SCANCODE_ONESUPERIOR},
    {"MASCULINE", SDL_SCANCODE_MASCULINE},
    {"GUILLEMOTRIGHT", SDL_SCANCODE_GUILLEMOTRIGHT},
    {"ONEQUARTER", SDL_SCANCODE_ONEQUARTER},
    {"ONEHALF", SDL_SCANCODE_ONEHALF},
    {"THREEQUARTERS", SDL_SCANCODE_THREEQUARTERS},
    {"QUESTIONDOWN", SDL_SCANCODE_QUESTIONDOWN},
    {"AGRAVE", SDL_SCANCODE_AGRAVE},
    {"AACUTE", SDL_SCANCODE_AACUTE},
    {"ACIRCUMFLEX", SDL_SCANCODE_ACIRCUMFLEX},
    {"ATILDE", SDL_SCANCODE_ATILDE},
    {"ADIAERESIS", SDL_SCANCODE_ADIAERESIS},
    {"ARING", SDL_SCANCODE_ARING},
    {"AE", SDL_SCANCODE_AE},
    {"CCEDILLA", SDL_SCANCODE_CCEDILLA},
    {"EGRAVE", SDL_SCANCODE_EGRAVE},
    {"EACUTE", SDL_SCANCODE_EACUTE},
    {"ECIRCUMFLEX", SDL_SCANCODE_ECIRCUMFLEX},
    {"EDIAERESIS", SDL_SCANCODE_EDIAERESIS},
    {"IGRAVE", SDL_SCANCODE_IGRAVE},
    {"IACUTE", SDL_SCANCODE_IACUTE},
    {"ICIRCUMFLEX", SDL_SCANCODE_ICIRCUMFLEX},
    {"IDIAERESIS", SDL_SCANCODE_IDIAERESIS},
    {"ETH", SDL_SCANCODE_ETH},
    {"NTILDE", SDL_SCANCODE_NTILDE},
    {"OGRAVE", SDL_SCANCODE_OGRAVE},
    {"OACUTE", SDL_SCANCODE_OACUTE},
    {"OCIRCUMFLEX", SDL_SCANCODE_OCIRCUMFLEX},
    {"OTILDE", SDL_SCANCODE_OTILDE},
    {"ODIAERESIS", SDL_SCANCODE_ODIAERESIS},
    {"MULTIPLY", SDL_SCANCODE_MULTIPLY},
    {"OOBLIQUE", SDL_SCANCODE_OOBLIQUE},
    {"UGRAVE", SDL_SCANCODE_UGRAVE},
    {"UACUTE", SDL_SCANCODE_UACUTE},
    {"UCIRCUMFLEX", SDL_SCANCODE_UCIRCUMFLEX},
    {"UDIAERESIS", SDL_SCANCODE_UDIAERESIS},
    {"YACUTE", SDL_SCANCODE_YACUTE},
    {"THORN", SDL_SCANCODE_THORN},
    {"SSHARP", SDL_SCANCODE_SSHARP},
    {"DIVISION", SDL_SCANCODE_DIVISION},
    {"YDIAERESIS", SDL_SCANCODE_YDIAERESIS},
    {"CODE_MASK", SDL_SCANCODE_CODE_MASK},
    {"MODIFIER_MASK", SDL_SCANCODE_MODIFIER_MASK},
    {"MASK_SHIFT", SDL_SCANCODE_MASK_SHIFT},
    {"MASK_ALT", SDL_SCANCODE_MASK_ALT},
    {"MASK_META", SDL_SCANCODE_MASK_META},
    {"MASK_CTRL", SDL_SCANCODE_MASK_CTRL},
    {"MASK_CMD", SDL_SCANCODE_MASK_CMD},
    {"MASK_KPAD", SDL_SCANCODE_MASK_KPAD},
    {"MASK_GROUP_SWITCH", SDL_SCANCODE_MASK_GROUP_SWITCH},
};

int GetScancodeFromName(const char * sdl_keyname)
{
    std::string keyname(sdl_keyname);
    std::transform(keyname.begin(), keyname.end(), keyname.begin(), ::toupper);

    try {
        return name_to_scancode.at(keyname);
    }
    catch (std::out_of_range&) {}

    return 0;
}

